{%- comment -%}
Header2: A slim top header to display above the main header on all pages.
Provides a compact search trigger and quick icons.
{%- endcomment -%}

<style>
  .header2-wrapper {
    padding: 6px 3rem;
    background: transparent;
  }

  .header2 {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }

  .header2__left,
  .header2__right {
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }

  .header2__search-button {
    background: none;
    border: none;
    padding: 0.2rem 0.6rem;
    cursor: pointer;
  }

  @media screen and (min-width: 750px) {
    .header2-wrapper { padding: 8px 3rem; }
  }
</style>

<div class="header2-wrapper header-wrapper color-{{ section.settings.color_scheme | default: 'scheme-1' }}">
  <div class="header2 page-width">
    <div class="header2__left">
      <button class="header2__search-button" aria-label="{{ 'general.search' | t }}" data-open-search>
        <span class="svg-wrapper">{{ 'icon-search.svg' | inline_asset_content }}</span>
      </button>
    </div>

    <div class="header2__right">
      {%- if shop.customer_accounts_enabled -%}
        <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="header__icon header__icon--account link focus-inset">
          <span class="svg-wrapper">{{ 'icon-account.svg' | inline_asset_content }}</span>
        </a>
      {%- endif -%}

      <a href="{{ routes.cart_url }}" class="header__icon header__icon--cart link focus-inset">
        <span class="svg-wrapper">{{ 'icon-cart-empty.svg' | inline_asset_content }}</span>
      </a>
    </div>
  </div>
</div>

{%- schema -%}
{
  "name": "Header 2",
  "settings": [
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "options": [
        {"value": "scheme-1", "label": "Scheme 1"},
        {"value": "scheme-2", "label": "Scheme 2"},
        {"value": "scheme-3", "label": "Scheme 3"},
        {"value": "scheme-4", "label": "Scheme 4"},
        {"value": "scheme-5", "label": "Scheme 5"}
      ],
      "default": "scheme-1"
    }
  ],
  "blocks": [],
  "presets": [
    {"name": "Header 2", "category": "Header"}
  ]
}
{%- endschema -%}

<script>
document.addEventListener('click', function (e) {
  var btn = e.target.closest('[data-open-search]');
  if (!btn) return;
  var search = document.querySelector('predictive-search') || document.querySelector('search-modal');
  if (search && typeof search.open === 'function') return search.open();
  window.location.href = '{{ routes.search_url }}';
});
</script>
